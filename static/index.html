<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image-To-Md-Editor</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- é˜²æ­¢ Dark Mode é é¢é–ƒç™½ï¼šåœ¨ CSS è¼‰å…¥å¾Œç«‹å³è¨­å®š data-theme -->
    <script>
        (function() {
            var s = localStorage.getItem('theme-preference');
            var d = window.matchMedia('(prefers-color-scheme: dark)').matches;
            document.documentElement.setAttribute('data-theme', s || (d ? 'dark' : 'light'));
        })();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">Image-To-Md-Editor</div>
        <div class="navbar-links">
            <a href="#/editor" class="nav-link" data-page="editor">Editor</a>
            <a href="#/browser" class="nav-link" data-page="browser">File Browser</a>
        </div>
        <button class="btn btn-icon" id="btn-theme-toggle" title="åˆ‡æ›æ·±è‰²/æ·ºè‰²ä¸»é¡Œ" aria-label="åˆ‡æ›ä¸»é¡Œ">
            <span id="theme-icon">ğŸŒ™</span>
        </button>
    </nav>
    <main>
        <div id="page-editor" class="page">
            <div id="search-bar" class="search-bar hidden">
                <input type="text" id="search-input" placeholder="æœå°‹æ‰€æœ‰ Markdown æª”æ¡ˆ..." />
                <span id="search-count" class="search-count"></span>
                <button class="btn-icon" id="search-prev" title="ä¸Šä¸€å€‹ (Shift+Enter)">&#9650;</button>
                <button class="btn-icon" id="search-next" title="ä¸‹ä¸€å€‹ (Enter)">&#9660;</button>
                <button class="btn-icon" id="search-close" title="é—œé–‰ (Esc)">&#10005;</button>
            </div>
            <div class="mobile-tabs" id="mobile-tabs">
                <button class="mobile-tab active" data-panel="left">ğŸ“· åœ–ç‰‡</button>
                <button class="mobile-tab" data-panel="right">ğŸ“ ç·¨è¼¯å™¨</button>
            </div>
            <div class="editor-layout">
                <div class="panel panel-left">
                    <div class="panel-toolbar">
                        <button class="btn btn-icon" id="btn-prev" title="ä¸Šä¸€å¼µ">&lt;</button>
                        <span class="toolbar-filename" id="current-filename">â€”</span>
                        <button class="btn btn-icon" id="btn-next" title="ä¸‹ä¸€å¼µ">&gt;</button>
                        <button class="btn btn-icon" id="btn-grayscale" title="åˆ‡æ›é»‘ç™½é¡¯ç¤º">â—‘</button>
                    </div>
                    <div class="image-preview" id="image-preview">
                        <img id="preview-image" alt="åœ–ç‰‡é è¦½" />
                        <canvas id="crop-overlay"></canvas>
                    </div>
                </div>
                <div class="panel panel-right">
                    <div class="panel-toolbar">
                        <span class="toolbar-filename" id="current-md-filename">â€”</span>
                        <button class="btn btn-icon" id="btn-save" title="å„²å­˜ (Ctrl+S)" disabled>ğŸ’¾</button>
                        <button class="btn btn-icon" id="btn-ocr" title="OCR æ–‡å­—è¾¨è­˜">ğŸ”</button>
                        <button class="btn btn-icon" id="btn-preview" title="é è¦½">ğŸ‘</button>
                    </div>
                    <div class="editor-area">
                        <textarea id="md-editor" placeholder="å°šç„¡ Markdown å…§å®¹"></textarea>
                        <div id="md-preview" class="md-preview hidden"></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="page-browser" class="page">
            <div class="browser-header">
                <h2 class="browser-title">æª”æ¡ˆç®¡ç†</h2>
                <button class="btn-primary" id="btn-upload">ğŸ“¤ ä¸Šå‚³åœ–ç‰‡</button>
            </div>
            <div class="browser-table-wrap">
                <table class="browser-table">
                    <thead>
                        <tr>
                            <th>æª”å</th>
                            <th>é¡å‹</th>
                            <th>é—œè¯</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="file-list"></tbody>
                </table>
            </div>

            <!-- ä¸Šå‚³å°è©±æ¡† -->
            <div class="modal-overlay hidden" id="upload-modal">
                <div class="modal">
                    <h3>ä¸Šå‚³åœ–ç‰‡</h3>
                    <div class="drop-zone" id="drop-zone">
                        æ‹–æ›³åœ–ç‰‡è‡³æ­¤è™•ï¼Œæˆ– <label class="drop-zone-link">é»æ“Šé¸å–<input type="file" id="file-input" accept="image/*" hidden></label>
                    </div>
                    <p class="drop-zone-filename" id="selected-filename"></p>
                    <div class="modal-actions">
                        <button class="btn-secondary" id="upload-cancel">å–æ¶ˆ</button>
                        <button class="btn-primary" id="upload-confirm" disabled>ä¸Šå‚³</button>
                    </div>
                </div>
            </div>

            <!-- é‡æ–°å‘½åå°è©±æ¡† -->
            <div class="modal-overlay hidden" id="rename-modal">
                <div class="modal">
                    <h3>é‡æ–°å‘½å</h3>
                    <p class="modal-hint" id="rename-original"></p>
                    <input type="text" class="modal-input" id="rename-input" />
                    <div class="modal-actions">
                        <button class="btn-secondary" id="rename-cancel">å–æ¶ˆ</button>
                        <button class="btn-primary" id="rename-confirm">ç¢ºèª</button>
                    </div>
                </div>
            </div>

            <!-- åˆªé™¤ç¢ºèªå°è©±æ¡† -->
            <div class="modal-overlay hidden" id="delete-modal">
                <div class="modal">
                    <h3>ç¢ºèªåˆªé™¤</h3>
                    <p id="delete-message"></p>
                    <label class="modal-checkbox" id="delete-pair-label">
                        <input type="checkbox" id="delete-pair-check" />
                        <span id="delete-pair-text"></span>
                    </label>
                    <div class="modal-actions">
                        <button class="btn-secondary" id="delete-cancel">å–æ¶ˆ</button>
                        <button class="btn-danger" id="delete-confirm">åˆªé™¤</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script src="/static/js/toast.js"></script>
    <script src="/static/js/spinner.js"></script>
    <script src="/static/js/router.js"></script>
    <script src="/static/js/editor.js"></script>
    <script src="/static/js/cropper.js"></script>
    <script src="/static/js/search.js"></script>
    <script src="/static/js/browser.js"></script>
    <script src="/static/js/theme.js"></script>
    <script src="/static/js/responsive.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
