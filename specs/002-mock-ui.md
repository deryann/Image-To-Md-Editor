# SPEC-002：Mock UI 規劃 — Image-To-Md-Editor

> 版本：1.0
> 建立日期：2026-02-27
> 狀態：Draft

---

## 1. 頁面導覽結構

```
┌─────────────────────────────────────────────────────────┐
│  Navigation Bar                                         │
│  [Image-To-Md-Editor]          [Editor]  [File Browser] │
└─────────────────────────────────────────────────────────┘
                    │                        │
                    ▼                        ▼
           編輯器頁面 (§2)          檔案瀏覽器頁面 (§3)
```

---

## 2. 編輯器頁面 Mock UI

### 2.1 整體版面

```
┌──────────────────────────────────────────────────────────────────────┐
│  Navigation Bar                                                      │
│  [Image-To-Md-Editor]                       [Editor]  [File Browser] │
├────────────────────────────┬─────────────────────────────────────────┤
│      左面板（圖片瀏覽）      │        右面板（Markdown 編輯）          │
│                            │                                         │
│  ┌────────────────────┐    │  ┌─────────────────────────────────┐    │
│  │ photo_001.jpg       │    │  │ photo_001.md                    │    │
│  │ [<上一張] [下一張>] │    │  │ [💾儲存] [🔍OCR] [👁預覽]     │    │
│  └────────────────────┘    │  └─────────────────────────────────┘    │
│                            │                                         │
│  ┌────────────────────┐    │  ┌─────────────────────────────────┐    │
│  │                    │    │  │                                 │    │
│  │                    │    │  │  # 標題                         │    │
│  │   Image Preview    │    │  │                                 │    │
│  │                    │    │  │  這是一段 Markdown 內容...       │    │
│  │   (支援框選裁切)    │    │  │                                 │    │
│  │                    │    │  │  ![image](./embedded_images/    │    │
│  │                    │    │  │   photo_001_a1b2c3d4.jpg)       │    │
│  │                    │    │  │                                 │    │
│  │                    │    │  │                                 │    │
│  └────────────────────┘    │  └─────────────────────────────────┘    │
│                            │                                         │
├────────────────────────────┴─────────────────────────────────────────┤
│  Status Bar: 已儲存 ✓  |  圖片: 1/24  |  Ctrl+S 儲存               │
└──────────────────────────────────────────────────────────────────────┘
```

### 2.2 左面板 — 頂部工具列

```
┌──────────────────────────────────────────┐
│  📷 photo_001.jpg       [< 上一張] [下一張 >] │
└──────────────────────────────────────────┘
```

- 左側顯示目前圖片檔名
- 右側為上/下一張切換按鈕
- 按鈕 disabled 狀態：第一張時 `<` 無法點擊，最後一張時 `>` 無法點擊

### 2.3 左面板 — 圖片預覽區

```
┌──────────────────────────────────────────┐
│                                          │
│         ┌─ ─ ─ ─ ─ ─ ┐                  │
│         │  框選區域    │  ← 虛線框       │
│         │  (裁切範圍)  │                  │
│         └─ ─ ─ ─ ─ ─ ┘                  │
│                                          │
│              圖片內容                     │
│                                          │
└──────────────────────────────────────────┘
  提示文字: 拖曳框選區域，Ctrl+C 複製
```

**互動狀態：**

| 狀態 | 視覺表現 |
|------|----------|
| 預設 | 顯示完整圖片，游標為十字準心 |
| 拖曳中 | 顯示半透明藍色遮罩的框選範圍 |
| 框選完成 | 虛線框標示選取區域，可重新拖曳調整 |
| 複製成功 | 短暫顯示「已複製」提示 toast |

### 2.4 右面板 — 頂部工具列

```
┌──────────────────────────────────────────────────┐
│  📝 photo_001.md    [💾 儲存] [🔍 OCR] [👁 預覽] │
└──────────────────────────────────────────────────┘
```

- 檔名文字：顯示目前 `.md` 對應檔名
- 儲存按鈕：點擊或 `Ctrl+S` 觸發
- OCR 按鈕：對左側圖片執行文字辨識
- 預覽按鈕：Toggle 切換編輯/預覽模式

**按鈕狀態：**

| 按鈕 | 一般狀態 | 啟用狀態 |
|------|----------|----------|
| 儲存 | 灰色 | 有未儲存變更時高亮 |
| OCR | 一般 | 處理中顯示 loading spinner |
| 預覽 | 一般底色 | 啟用時高亮（Toggle） |

### 2.5 右面板 — 編輯模式

```
┌──────────────────────────────────────────────────┐
│ # 這是標題                                        │
│                                                  │
│ 這是一段文字說明，描述圖片中的內容。               │
│                                                  │
│ ## 重點摘要                                       │
│                                                  │
│ - 項目一                                          │
│ - 項目二                                          │
│                                                  │
│ ![image](./embedded_images/photo_001_a1b2c3d4.jpg)│
│                                                  │
│ ```mermaid                                       │
│ graph TD                                         │
│     A --> B                                      │
│ ```                                              │
│                                                  │
│                                          ▼ 可捲動 │
└──────────────────────────────────────────────────┘
```

### 2.6 右面板 — 預覽模式

```
┌──────────────────────────────────────────────────┐
│                                                  │
│  ┌────────────────────────────────────────────┐  │
│  │         渲染後的 Markdown 內容               │  │
│  │                                            │  │
│  │  這是標題                                   │  │
│  │  ════════                                  │  │
│  │                                            │  │
│  │  這是一段文字說明...                         │  │
│  │                                            │  │
│  │  ┌──────────────────┐                      │  │
│  │  │  嵌入圖片預覽     │                      │  │
│  │  └──────────────────┘                      │  │
│  │                                            │  │
│  │  ┌──────────────────┐                      │  │
│  │  │  Mermaid 圖表     │                      │  │
│  │  │   [A] ──→ [B]    │                      │  │
│  │  └──────────────────┘                      │  │
│  │                                            │  │
│  └────────────────────────────────────────────┘  │
│                                          ▼ 可捲動 │
└──────────────────────────────────────────────────┘
```

---

## 3. 檔案瀏覽器頁面 Mock UI

### 3.1 整體版面

```
┌──────────────────────────────────────────────────────────────────────┐
│  Navigation Bar                                                      │
│  [Image-To-Md-Editor]                       [Editor]  [File Browser] │
├──────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  檔案管理                                          [📤 上傳圖片]     │
│                                                                      │
│  ┌─────────────────────────────────────────────────────────────────┐ │
│  │  檔名                    │ 類型     │ 操作                      │ │
│  ├──────────────────────────┼──────────┼──────────────────────────┤ │
│  │  photo_001.jpg           │ 🖼 圖片  │ [✏編輯] [📝改名] [🗑刪除]│ │
│  │  photo_001.md            │ 📄 MD   │ [✏編輯] [📝改名] [🗑刪除]│ │
│  ├──────────────────────────┼──────────┼──────────────────────────┤ │
│  │  photo_002.jpg           │ 🖼 圖片  │ [✏編輯] [📝改名] [🗑刪除]│ │
│  │  photo_002.md            │ 📄 MD   │ [✏編輯] [📝改名] [🗑刪除]│ │
│  ├──────────────────────────┼──────────┼──────────────────────────┤ │
│  │  report_chart.png        │ 🖼 圖片  │ [✏編輯] [📝改名] [🗑刪除]│ │
│  │  report_chart.md         │ 📄 MD   │ [✏編輯] [📝改名] [🗑刪除]│ │
│  └──────────────────────────┴──────────┴──────────────────────────┘ │
│                                                                      │
│                           [1] [2] [3] ... [>]                        │
│                                                                      │
└──────────────────────────────────────────────────────────────────────┘
```

### 3.2 上傳圖片對話框

```
┌──────────────────────────────────────────┐
│  上傳圖片                           [✕]  │
├──────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────────┐  │
│  │                                    │  │
│  │   拖曳圖片至此處                    │  │
│  │   或點擊選取檔案                    │  │
│  │                                    │  │
│  └────────────────────────────────────┘  │
│                                          │
│  已選取: photo_003.png                   │
│                                          │
│              [取消]  [上傳]              │
└──────────────────────────────────────────┘
```

### 3.3 重新命名對話框

```
┌──────────────────────────────────────────┐
│  重新命名                           [✕]  │
├──────────────────────────────────────────┤
│                                          │
│  原始檔名: photo_001.jpg                 │
│                                          │
│  新檔名: [photo_001_edited          ]    │
│                                          │
│  ⚠ 同時重新命名對應的 .md 檔案            │
│                                          │
│              [取消]  [確認]              │
└──────────────────────────────────────────┘
```

### 3.4 刪除確認對話框

```
┌──────────────────────────────────────────┐
│  確認刪除                           [✕]  │
├──────────────────────────────────────────┤
│                                          │
│  確定要刪除 photo_001.jpg 嗎？            │
│                                          │
│  ☐ 同時刪除對應的 photo_001.md           │
│                                          │
│              [取消]  [刪除]              │
└──────────────────────────────────────────┘
```

---

## 4. 共用元件

### 4.1 Navigation Bar

```
┌──────────────────────────────────────────────────────────┐
│  [Logo] Image-To-Md-Editor              [Editor] [Files] │
└──────────────────────────────────────────────────────────┘
```

- 左側：應用程式名稱/Logo
- 右側：頁面切換連結，目前頁面高亮顯示

### 4.2 Toast 通知

```
                    ┌─────────────────────┐
                    │  ✅ 儲存成功         │
                    └─────────────────────┘
```

出現場景：
- 儲存成功/失敗
- 複製圖片成功
- 上傳完成
- 刪除完成
- OCR 辨識完成

顯示位置：畫面右上角，3 秒後自動消失。

### 4.3 Loading Spinner

```
        ┌────────────────────────┐
        │     ◠ 處理中...        │
        └────────────────────────┘
```

出現場景：
- OCR 辨識中
- 圖片上傳中
- 檔案載入中

---

## 5. 響應式設計考量

| 螢幕寬度 | 版面配置 |
|----------|----------|
| ≥ 1024px | 左右對開雙面板（各 50%） |
| 768–1023px | 左右對開，左 40% / 右 60% |
| < 768px | 上下堆疊，上方圖片、下方編輯器（Tab 切換） |

---

## 6. 使用者操作流程

### 6.1 基本編輯流程

```
開啟編輯器頁面
    │
    ▼
系統載入第一張圖片與對應 .md
    │
    ▼
使用者檢視圖片 ──→ 在右側編輯 Markdown
    │                    │
    ▼                    ▼
切換下一張圖片      按下 Ctrl+S 儲存
    │
    ▼
系統提示是否儲存未保存的變更
    │
    ├── [是] → 儲存後切換
    └── [否] → 直接切換
```

### 6.2 圖片裁切嵌入流程

```
在左面板拖曳框選圖片區域
    │
    ▼
按下 Ctrl+C → 裁切區域存入剪貼簿
    │
    ▼
點擊右面板 textarea，將游標移至目標位置
    │
    ▼
按下 Ctrl+V
    │
    ▼
系統自動：
  1. 上傳裁切圖片至 embedded_images/
  2. 在游標位置插入 ![image](./embedded_images/...)
```

### 6.3 OCR 辨識流程

```
左面板顯示目標圖片
    │
    ▼
點擊右面板 [🔍 OCR] 按鈕
    │
    ▼
顯示 Loading Spinner
    │
    ▼
後端執行中文 OCR 辨識
    │
    ▼
辨識結果附加至 textarea 末端
    │
    ▼
Toast 通知：「OCR 辨識完成」
```

### 6.4 檔案上傳流程

```
在檔案瀏覽器頁面點擊 [📤 上傳圖片]
    │
    ▼
彈出上傳對話框，選擇/拖曳圖片
    │
    ▼
點擊 [上傳]
    │
    ▼
系統自動：
  1. 儲存圖片至 data/images/
  2. 建立對應 data/mds/{base_name}.md
  3. 在 .md 中預設插入 ![image](../images/{base_name}.{ext})
    │
    ▼
重新整理檔案清單
```
